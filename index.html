<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Pok√©mon Typ-Rechner</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #1a1a2e;
    color: #fff;
    min-height: 100vh;
    padding: 16px;
  }
  h1 {
    text-align: center;
    font-size: 1.3rem;
    margin-bottom: 16px;
    color: #e0e0ff;
    letter-spacing: 1px;
  }
  .type-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    max-width: 480px;
    margin: 0 auto 20px;
  }
  .type-btn {
    padding: 10px 6px;
    border: none;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 700;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: transform 0.1s, box-shadow 0.1s, opacity 0.1s;
    opacity: 0.85;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  .type-btn:active { transform: scale(0.95); }
  .type-btn.selected {
    opacity: 1;
    transform: scale(1.06);
    box-shadow: 0 4px 16px rgba(255,255,255,0.4);
    outline: 3px solid white;
  }

  .result-section {
    max-width: 480px;
    margin: 0 auto;
    display: none;
  }
  .result-section.visible { display: block; }

  .selected-type-badge {
    text-align: center;
    margin-bottom: 16px;
  }
  .selected-type-badge span {
    padding: 8px 28px;
    border-radius: 30px;
    font-size: 1.2rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.5);
  }

  .card {
    background: rgba(255,255,255,0.05);
    border-radius: 16px;
    padding: 14px;
    margin-bottom: 12px;
    border: 1px solid rgba(255,255,255,0.08);
  }
  .card h2 {
    font-size: 0.9rem;
    color: #aaa;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .effectiveness-row {
    margin-bottom: 8px;
  }
  .eff-label {
    font-size: 0.75rem;
    color: #888;
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .eff-label .mult {
    font-size: 1rem;
    font-weight: 800;
  }
  .x4 .mult { color: #ff4444; }
  .x2 .mult { color: #ff8c00; }
  .x05 .mult { color: #4caf50; }
  .x025 .mult { color: #2196f3; }
  .x0 .mult { color: #666; }

  .type-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }
  .chip {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .empty-label {
    font-size: 0.75rem;
    color: #555;
    font-style: italic;
  }

  /* Type colors */
  .t-normal   { background:#A8A878; color:#fff; }
  .t-fire     { background:#F08030; color:#fff; }
  .t-water    { background:#6890F0; color:#fff; }
  .t-electric { background:#F8D030; color:#333; }
  .t-grass    { background:#78C850; color:#fff; }
  .t-ice      { background:#98D8D8; color:#333; }
  .t-fighting { background:#C03028; color:#fff; }
  .t-poison   { background:#A040A0; color:#fff; }
  .t-ground   { background:#E0C068; color:#333; }
  .t-flying   { background:#A890F0; color:#fff; }
  .t-psychic  { background:#F85888; color:#fff; }
  .t-bug      { background:#A8B820; color:#fff; }
  .t-rock     { background:#B8A038; color:#fff; }
  .t-ghost    { background:#705898; color:#fff; }
  .t-dragon   { background:#7038F8; color:#fff; }
  .t-dark     { background:#705848; color:#fff; }
  .t-steel    { background:#B8B8D0; color:#333; }
  .t-fairy    { background:#EE99AC; color:#fff; }

  .hint {
    text-align: center;
    color: #555;
    font-size: 0.85rem;
    margin-top: 8px;
  }
</style>
</head>
<body>
<h1>‚ö° Typ-Effektivit√§t</h1>

<div class="type-grid" id="typeGrid"></div>
<p class="hint" id="hint">Tippe einen Typ an</p>

<div class="result-section" id="results">
  <div class="selected-type-badge"><span id="selectedBadge"></span></div>

  <div class="card">
    <h2>üó°Ô∏è Angriff ‚Äî dieser Typ trifft...</h2>
    <div id="offResult"></div>
  </div>

  <div class="card">
    <h2>üõ°Ô∏è Verteidigung ‚Äî dieser Typ wird getroffen von...</h2>
    <div id="defResult"></div>
  </div>
</div>

<script>
const TYPES = [
  'Normal','Fire','Water','Electric','Grass','Ice',
  'Fighting','Poison','Ground','Flying','Psychic','Bug',
  'Rock','Ghost','Dragon','Dark','Steel','Fairy'
];

const TYPE_CLASS = {
  Normal:'t-normal', Fire:'t-fire', Water:'t-water', Electric:'t-electric',
  Grass:'t-grass', Ice:'t-ice', Fighting:'t-fighting', Poison:'t-poison',
  Ground:'t-ground', Flying:'t-flying', Psychic:'t-psychic', Bug:'t-bug',
  Rock:'t-rock', Ghost:'t-ghost', Dragon:'t-dragon', Dark:'t-dark',
  Steel:'t-steel', Fairy:'t-fairy'
};

// chart[attacker][defender] = multiplier (2=2x, 0.5=0.5x, 0=immune)
// Only non-1x values stored
const CHART = {
  Normal:   { Rock:0.5, Steel:0.5, Ghost:0 },
  Fire:     { Fire:0.5, Water:0.5, Rock:0.5, Dragon:0.5, Grass:2, Ice:2, Bug:2, Steel:2 },
  Water:    { Water:0.5, Grass:0.5, Dragon:0.5, Fire:2, Ground:2, Rock:2 },
  Electric: { Electric:0.5, Grass:0.5, Dragon:0.5, Ground:0, Water:2, Flying:2 },
  Grass:    { Fire:0.5, Grass:0.5, Poison:0.5, Flying:0.5, Bug:0.5, Dragon:0.5, Steel:0.5, Water:2, Ground:2, Rock:2 },
  Ice:      { Water:0.5, Ice:0.5, Steel:0.5, Grass:2, Ground:2, Flying:2, Dragon:2 },
  Fighting: { Poison:0.5, Flying:0.5, Psychic:0.5, Bug:0.5, Ghost:0, Fairy:0.5, Normal:2, Ice:2, Rock:2, Dark:2, Steel:2 },
  Poison:   { Poison:0.5, Ground:0.5, Rock:0.5, Ghost:0.5, Steel:0, Grass:2, Fairy:2 },
  Ground:   { Grass:0.5, Bug:0.5, Flying:0, Fire:2, Electric:2, Poison:2, Rock:2, Steel:2 },
  Flying:   { Electric:0.5, Rock:0.5, Steel:0.5, Grass:2, Fighting:2, Bug:2 },
  Psychic:  { Psychic:0.5, Steel:0.5, Dark:0, Fighting:2, Poison:2 },
  Bug:      { Fire:0.5, Fighting:0.5, Flying:0.5, Ghost:0.5, Steel:0.5, Fairy:0.5, Grass:2, Psychic:2, Dark:2 },
  Rock:     { Fighting:0.5, Ground:0.5, Steel:0.5, Fire:2, Ice:2, Flying:2, Bug:2 },
  Ghost:    { Normal:0, Dark:0.5, Ghost:2, Psychic:2 },
  Dragon:   { Steel:0.5, Fairy:0, Dragon:2 },
  Dark:     { Fighting:0.5, Dark:0.5, Fairy:0.5, Psychic:2, Ghost:2 },
  Steel:    { Fire:0.5, Water:0.5, Electric:0.5, Steel:0.5, Ice:2, Rock:2, Fairy:2 },
  Fairy:    { Fire:0.5, Poison:0.5, Steel:0.5, Fighting:2, Dragon:2, Dark:2 }
};

function getOffensive(attType) {
  const row = CHART[attType] || {};
  const result = { 2:[], 0.5:[], 0:[] };
  for (const def of TYPES) {
    const m = row[def] ?? 1;
    if (m === 2) result[2].push(def);
    else if (m === 0.5) result[0.5].push(def);
    else if (m === 0) result[0].push(def);
  }
  return result;
}

function getDefensive(defType) {
  const result = { 2:[], 0.5:[], 0:[] };
  for (const att of TYPES) {
    const row = CHART[att] || {};
    const m = row[defType] ?? 1;
    if (m === 2) result[2].push(att);
    else if (m === 0.5) result[0.5].push(att);
    else if (m === 0) result[0].push(att);
  }
  return result;
}

function renderRows(data, mode) {
  // mode: 'off' or 'def'
  const rows = [
    { mult: 2,   key: 2,   label: mode==='off' ? 'Trifft 2√ó (super effektiv)' : 'Schw√§che 2√ó (trifft h√§rter)',  cls: 'x2' },
    { mult: 0.5, key: 0.5, label: mode==='off' ? 'Trifft ¬Ω√ó (nicht sehr effektiv)' : 'Resistenz ¬Ω√ó (trifft schw√§cher)', cls: 'x05' },
    { mult: 0,   key: 0,   label: mode==='off' ? 'Keine Wirkung 0√ó' : 'Immunit√§t 0√ó (gar kein Schaden)',    cls: 'x0' },
  ];
  return rows.map(r => {
    const types = data[r.key];
    const chips = types.length
      ? types.map(t => `<span class="chip ${TYPE_CLASS[t]}">${t}</span>`).join('')
      : `<span class="empty-label">‚Äî</span>`;
    return `<div class="effectiveness-row">
      <div class="eff-label ${r.cls}"><span class="mult">${r.mult}√ó</span> ${r.label}</div>
      <div class="type-chips">${chips}</div>
    </div>`;
  }).join('');
}

// Build buttons
const grid = document.getElementById('typeGrid');
TYPES.forEach(t => {
  const btn = document.createElement('button');
  btn.className = `type-btn ${TYPE_CLASS[t]}`;
  btn.textContent = t;
  btn.dataset.type = t;
  btn.addEventListener('click', () => selectType(t));
  grid.appendChild(btn);
});

let selected = null;
function selectType(t) {
  if (selected === t) {
    selected = null;
    document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('selected'));
    document.getElementById('results').classList.remove('visible');
    document.getElementById('hint').style.display = 'block';
    return;
  }
  selected = t;
  document.querySelectorAll('.type-btn').forEach(b => {
    b.classList.toggle('selected', b.dataset.type === t);
  });
  document.getElementById('hint').style.display = 'none';

  const badge = document.getElementById('selectedBadge');
  badge.className = TYPE_CLASS[t];
  badge.textContent = t;

  document.getElementById('offResult').innerHTML = renderRows(getOffensive(t), 'off');
  document.getElementById('defResult').innerHTML = renderRows(getDefensive(t), 'def');
  document.getElementById('results').classList.add('visible');
}
</script>
</body>
</html>
